(this["webpackJsonpmodule2-project"]=this["webpackJsonpmodule2-project"]||[]).push([[0],{23:function(t,e,n){t.exports=n(34)},33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(19),r=n.n(o),i=n(8),l=n(9),s=n(11),u=n(10),h=n(22),m=n(6);var d=function(t){var e=Object(a.useState)(""),n=Object(h.a)(e,2),o=n[0],r=n[1],i=""===o?t.contacts:t.contacts.filter((function(t){return t.name.toLowerCase().includes(o.toLowerCase())}));return c.a.createElement("div",{className:"list-contacts"},c.a.createElement("div",{className:"list-contacts-top"},c.a.createElement("input",{className:"search-contacts",type:"text",placeholder:"Search Contacts",value:o,onChange:function(t){return r(t.target.value)}}),c.a.createElement(m.b,{to:"/create",className:"add-contact"},"Add Contact")),i.length!==t.contacts.length&&c.a.createElement("div",{className:"showing-contacts"},c.a.createElement("span",null,"Now showing ",i.length," of ",t.contacts.length),c.a.createElement("button",{onClick:function(){return r("")}},"Show all")),c.a.createElement("ol",{className:"contact-list"},i.map((function(e){return c.a.createElement("li",{key:e.id,className:"contact-list-item"},c.a.createElement("div",{className:"contact-avatar",style:{backgroundImage:"url(".concat(e.avatarURL,")")}}),c.a.createElement("div",{className:"contact-details"},c.a.createElement("p",null,e.name),c.a.createElement("p",null,e.handle)),c.a.createElement("button",{onClick:function(){return t.onDeleteContact(e)},className:"contact-remove"},"Remove"))}))))},f=n(16),v=Object({NODE_ENV:"production",PUBLIC_URL:"/module2-project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CONTACTS_API_URL||"http://localhost:5001",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:p},E=function(t){return fetch("".concat(v,"/contacts/").concat(t.id),{method:"DELETE",headers:g}).then((function(t){return t.json()})).then((function(t){return t.contact}))},C=function(t){return fetch("".concat(v,"/contacts"),{method:"POST",headers:Object(f.a)(Object(f.a)({},g),{},{"Content-Type":"application/json"}),body:JSON.stringify(t)}).then((function(t){return t.json()}))},b=function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}))},j=function(t,e,n){return new Promise((function(a){var c=new Image;c.onload=function(){var t=e.getContext("2d");c.height>n&&(c.width*=n/c.height,c.height=n),t.clearRect(0,0,e.width,e.height),e.width=c.width,e.height=c.height,t.drawImage(c,0,0,c.width,c.height),a(e.toDataURL("image/jpeg"))},c.src=t}))},w=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={value:""},t.handleFileChange=function(e){var n=e.target.files[0];n&&n.type.match(/^image\//)?b(n).then((function(e){j(e,t.canvas,t.props.maxHeight).then((function(e){t.setState({value:e})}))})):t.setState({value:""})},t.handleFormReset=function(){t.setState({value:""})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.canvas=document.createElement("canvas"),this.fileInput.form.addEventListener("reset",this.handleFormReset)}},{key:"componentWillUnmount",value:function(){this.fileInput.form.removeEventListener("reset",this.handleFormReset)}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,a=e.name,o=this.state.value,r={position:"relative"};return o&&(r.backgroundImage='url("'.concat(o,'")'),r.backgroundRepeat="no-repeat",r.backgroundPosition="center",r.backgroundSize="cover"),c.a.createElement("div",{className:n,style:r},c.a.createElement("input",{type:"hidden",name:a,value:o}),c.a.createElement("input",{ref:function(e){return t.fileInput=e},type:"file",onChange:this.handleFileChange,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}}))}}]),n}(c.a.Component),y=n(21),O=n.n(y),S=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).handleSubmit=function(e){e.preventDefault();var n=O()(e.target,{hash:!0});t.props.onCreateContact&&t.props.onCreateContact(n)},t}return Object(l.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(m.b,{to:"/",className:"close-create-contact"},"Close"),c.a.createElement("form",{onSubmit:this.handleSubmit,className:"create-contact-form"},c.a.createElement(w,{className:"create-contact-avatar-input",name:"avatarURL",maxHeight:64}),c.a.createElement("div",{className:"create-contact-details"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Name"}),c.a.createElement("input",{type:"text",name:"handle",placeholder:"Twitter Handle"}),c.a.createElement("button",null,"Add Contact"))))}}]),n}(a.Component),k=n(1),N=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={contacts:[]},t.removeContact=function(e){t.setState((function(t){return{contacts:t.contacts.filter((function(t){return t.id!==e.id}))}})),E(e)},t.createContact=function(e){C(e).then((function(e){t.setState((function(t){return{contacts:t.contacts.concat([e])}}))}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("".concat(v,"/contacts"),{headers:g}).then((function(t){return t.json()})).then((function(t){return t.contacts})).then((function(e){t.setState((function(){return{contacts:e}}))}))}},{key:"render",value:function(){var t=this;return c.a.createElement("div",null,c.a.createElement(k.a,{exact:!0,path:"/",render:function(){return c.a.createElement(d,{contacts:t.state.contacts,onDeleteContact:t.removeContact,on:!0})}}),c.a.createElement(k.a,{path:"/create",render:function(e){var n=e.history;return c.a.createElement(S,{onCreateContact:function(e){t.createContact(e),n.push("/")}})}}))}}]),n}(a.Component);n(33);r.a.render(c.a.createElement(m.a,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var t="".concat("/module2-project","/service-worker.js");navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}))}},[[23,1,2]]]);
//# sourceMappingURL=main.72f7a7ce.chunk.js.map